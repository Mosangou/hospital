<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ulyraq.net.nz/thymeleaf/layout"
      layout:decorate="template1.html">
<head>
  <meta charset="UTF-8">
  <title >title</title>
  <link rel="stylesheet" href="/webjars/bootstrap/5.3.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/webjars/bootstrap-icons/1.10.5/font/bootstrap-icons.css"
  
  
</head>
<body>
  <div layout:fragment="content">
	 <div class="card m-2">
	     <h1 class="card-header">Liste des patients</h1>
	     <div class="card-body">
            <form method="get" th:action="@{acceuil}" class=" form-group">
	           <label>keyword</label>
	           <input class="col-6" type="text" name="keyword" th:value="${keyword}">
	           <button type="submit" class="btn btn-info">search</button>  
            </form>
            <table class="table">
	  
	           <tr>
		          <th>ID</th><th>Nom</th><th>Date</th><th>Malade</th><th>Score</th>
	           </tr>
	  <tr th:each="p:${listPatients}">
		  <td th:text="${p.id}"></td>
		  <td th:text="${p.nom}"></td>
		  <td th:text="${p.dateNaissance}"></td>
		  <td th:text="${p.malade}"></td>
		  <td th:text="${p.score}"></td>
		  <td th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
			  <a onclick="javascript:return confirm('Etes vous sure de vouloir supprimer?')" 
			  th:href="@{/admin/delete(id=${p.id},keyword =${keyword}, page=${currentPage})}" class="btn btn-danger">Delete</a>
		  </td>
		  <td th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
			  <a class="btn btn-success" 
			  th:href="@{/admin/editPatient(id=${p.id})}">Edit</a>
		  </td>
		  
	  </tr>
	  
  </table>
  <ul class="nav nav-pills">
	  <li th:each="page,status:${pages}">
		  <a th:href="@{/acceuil(page=${status.index},keyword=${keyword})}" 
		  th:class="${(currentPage==status.index)?'btn btn-info ms-1':'btn btn-outline-info ms-1'}" 
		  th:text="${status.index}"></a>
	  </li>
  </ul>
	     </div>
	  </div>
  </div>	
  

</body>
</html>